function Validate(){var e=[["uxEmailLogin",{blank:"Please type in your email",email:"Invalid email format"}]];return e.push(["uxRefnoLogin",{blank:"Please type in reference number"}]),Whl.validate(e)}function TravellerLogin(){$.ajax({type:"POST",url:"/traveller_corner/?cmd=traveller_loggin",dataType:"text",data:$("#uxLoginForm").serialize(),beforeSend:function(){$("#uxEmailLoginInvalid").text("Authenticating...")},success:function(response){Whl.isJson(response)?(response=eval("("+response+")"),"OK"==response.Result?location.href=response.Url:$("#uxEmailLoginInvalid").html("Log in failed: this email or booking number combination is invalid.")):Whl.Dialog.error({msg:response,remove:!0})},error:function(e,t){Whl.Dialog.error({msg:t,remove:!0})}})}function destinations_nav(){a=$(".site-header .sub-nav .nav-slider-container").css("max-height"),"1400px"==String(a)?$(".site-header .sub-nav .nav-slider-container").css("max-height","0px"):$(".site-header .sub-nav .nav-slider-container").css("max-height","1400px"),$(".site-header .sub-nav .nav-links-container ul.nav-links li.nav-link-element .nav-dropdown-container").css("max-height","0px")}function featured_nav(){a=$(".site-header .sub-nav .nav-links-container ul.nav-links li.nav-link-element .nav-dropdown-container").css("max-height"),"1400px"==String(a)?$(".site-header .sub-nav .nav-links-container ul.nav-links li.nav-link-element .nav-dropdown-container").css("max-height","0px"):$(".site-header .sub-nav .nav-links-container ul.nav-links li.nav-link-element .nav-dropdown-container").css("max-height","1400px"),$(".site-header .sub-nav .nav-slider-container").css("max-height","0px")}Message={101:"Invalid parameters.",102:"Database error.",201:"Book in multiple destinations.",202:"Book with different number of adults and/or number of children.",203:"Sale closed.",204:"Children is not allowed.",205:"Invalid departure date.",206:"Rate is not available for specified date.",207:"Stop sale period.",208:"Book duplicate item.",209:"Looks like someone was booking at the same time as you! We're sorry, but that makes this tour full now. Care to pick another date instead?",501:"Invalid input data.",502:"Invalid credit card number. Please re-enter a valid credit card number.",503:"Credit card has been expired. Please enter another credit card details.",504:"Sorry, this gift certificate code is invalid or expired.",601:"Sorry, this special offer code is not correct.",602:"Sorry, this special offer code is invalid!",603:"Sorry, this special offer code can only be used from {0} to {1}.",604:"Sorry, this special offer code cannot apply for this sale channel.",605:"Sorry, this special offer code can only be used for trips departing from {0} to {1}.",606:"Sorry, this special offer code requires at least {0} trips in booking.",607:"Sorry, this special offer code requires at least {0} people in booking.",608:"Sorry, this special offer code has expired.",609:"Sorry, this tester code is invalid because:\r\n- You are not registered as Urban Adventures tester",610:"Sorry, you are not eligible for this promotion.",611:"Sorry, this tester code cannot apply on this departure date.",612:"Sorry, this tester code is invalid because:\r\n- This code has already been used for this tester email.",614:"Sorry, this special offer code cannot apply on the chosen trip.",615:"Sorry, this special offer code limits {1} people in booking.",616:"Sorry, this special offer code requires {0} to {1} people in booking.",617:"Server too busy.",618:"Sorry, this code cannot be used on this booking.",800:"Sorry, proprietary code canâ€™t be used for private tours.",801:"Sorry, proprietary code can not be used on this booking.",802:"Sorry, proprietary code is not available for agents or affiliates.",803:"Sorry, proprietary code canâ€™t be used in conjunction with a gift voucher.",900:"Sorry, this code is only available for first time travellers.",901:"Sorry, this code is only available for first time travellers.",950:"Sorry, the traveller is not allowed to use this reward code.",alm:{dateAlt:"Unfortunately, there's not enough room left on this tour to fit your entire party. Care to pick another date instead?",groupMin:"Minimum group size is ",groupMax:"Maximum group size is ",inValidCode:"Invalid code.",departureTime:"Please select a departure time.",departureDate:"Please select a departure date.",unAvail:"Unavailable date",firstAvail:"The First Available is ",check:"Checking data ... Please wait."},dlg:{title:"Loading",title2:"Invalid input data.",title3:"Checking data.",title4:"Invalid request.",title5:"Sorry, we're all booked up!",title6:"Oops, no room!",title7:""},errEmail:"Please enter a valid email.",errRequired:"Is required.",errInvalid:"Is invalid."},function(e){e.browser=e.browser||{},e.browser.msie=-1!=navigator.userAgent.toLowerCase().indexOf("msie"),e.fn.extend({isBlank:function(){var t=e.trim(this.val());return""==t||"-1"==t?!1:!0},isUrl:function(){var t=e.trim(this.val());return""==t?!0:-1==t.search(/^(http|https)(:\/\/)[a-z0-9_-]*\.?[a-z0-9_-]+\.[a-z0-9_-]+$/)?!1:!0},isDomain:function(){var t=e.trim(this.val());return""==t?!0:-1==t.search(/^(http|https):\/\/(([a-z0-9][a-z0-9_-]*)(\.[a-z0-9][a-z0-9_-]*)+)$/i)?!1:!0},isEmail:function(){var t=e.trim(this.val());return""==t?!0:-1==t.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]{2,6}$/)?!1:!0},gtDate:function(t,a){return a=a||!1,a?Date.compareDate2(this.val(),e(t).val())>=0:Date.compareDate2(this.val(),e(t).val())>0},ltDate:function(t,a){return a=a||!1,a?Date.compareDate2(this.val(),e(t).val())<=0:Date.compareDate2(this.val(),e(t).val())<0},ltDate2:function(e,t){return t=t||!1,t?Date.compareDate2(this.val(),e)<=0:Date.compareDate2(this.val(),e)<0},eqString:function(t){return this.val().compare(e(t).val())},gtNumber:function(t){return Number.compareFloat(this.val(),e(t).val())>0},isOnlyNumeric:function(){return-1==e.trim(this.val()).search(/^\d*(\.\d+)?$/)?!1:!0},isValidInteger:function(){return-1==e.trim(this.val()).search(/^((\+|-)\d)?\d*$/)?!1:!0},isValidFloat:function(){return-1==e.trim(this.val()).search(/^((\+|-)\d)?\d*(\.\d+)?$/)?!1:!0},isOnlyAlphabetic:function(){return-1==e.trim(this.val()).search(/[a-z ]/i)?!1:!0},isMatch:function(t){return e("#"+t).val()==this.val()?!0:!1},isExist:function(){return this.length>0},forceNumber:function(){return this.each(function(){e(this).keypress(function(t){var a=0,i=0;return e.browser.msie?i=t.keyCode:(i=t.which,a=t.keyCode),a>=37&&40>=a?!0:8==a||46==a||35==a||36==a?!0:i>=48&&57>=i||9==i||13==i?!0:!1})})},forceFloat:function(){return this.each(function(){e(this).keypress(function(t){var a=0,i=0;return e.browser.msie?i=t.keyCode:(i=t.which,a=t.keyCode),a>=37&&40>=a?!0:8==a||46==a||35==a||36==a||9==a?!0:i>=48&&57>=i||46==i?!0:!1})})},forceAlphaNumber:function(){return this.each(function(){e(this).keypress(function(e){var t=0;return window.event?t=e.keyCode:e.which&&(t=e.which),t>=48&&57>=t||t>=65&&90>=t||t>=97&&122>=t||8==t||9==t?!0:!1})})},removeError:function(){return this.each(function(){e(this).removeClass("error").html("")})}})}(jQuery),$(document).ready(function(){$("#show-profile").click(function(e){$("#show-func-profile").toggleClass("show-profile"),e.stopPropagation()}),$(document).click(function(e){$(e.target).hasClass("show-profile")||$("#show-func-profile").removeClass("show-profile")}),$("#show-profile-mobile").click(function(e){$("#show-func-profile-mobile").toggleClass("show-profile-mobile"),e.stopPropagation()}),$(document).click(function(e){$(e.target).hasClass("show-profile-mobile")||$("#show-func-profile-mobile").removeClass("show-profile-mobile")}),$("#uxLogin").click(function(e){e.preventDefault(),Validate()&&TravellerLogin()}),Whl.UA.initData()}),$("html").on("click",function(){a=$(".site-header .sub-nav .nav-slider-container").css("max-height"),"1400px"==String(a)&&$(".site-header .sub-nav .nav-slider-container").css("max-height","0px"),a=$(".site-header .sub-nav .nav-links-container ul.nav-links li.nav-link-element .nav-dropdown-container").css("max-height"),"1400px"==String(a)&&$(".site-header .sub-nav .nav-links-container ul.nav-links li.nav-link-element .nav-dropdown-container").css("max-height","0px")}),$(document).ready(function(){var e=0,t=0,i=0;$(".city .sections .grid__item").each(function(){a=$(this).height(),b=$(this).find(".tour-info-tile-info").height(),c=$(this).find(".tour-info-tile-description").height(),d=$(this).find(".tour-info-tile-image").height(),a>e&&(e=a),b>t&&(t=b),c>i&&(i=c)}),$(".city .sections .grid__item .tour-info-tile-info").height(t),$(".city .sections .grid__item .tour-info-tile-description").height(i),$(".single-country .other-tours .grid__item").each(function(){a=$(this).height(),b=$(this).find(".tour-info-tile-info").height(),c=$(this).find(".tour-info-tile-description").height(),a>e&&(e=a),b>t&&(t=b),c>i&&(i=c)}),$(".single-country .other-tours .grid__item .tour-info-tile-info").height(t),$(".single-country .other-tours .grid__item .tour-info-tile-description").height(i),$("#featured_nav").on("click",function(){arguments[0].preventDefault(),arguments[0].stopPropagation(),featured_nav()}),$("#destinations_nav").on("click",function(){arguments[0].preventDefault(),arguments[0].stopPropagation(),destinations_nav()}),$("#nav-slider-prev,#nav-slider-next").on("click",function(){arguments[0].preventDefault(),arguments[0].stopPropagation()}),$("#search-header i").click(function(){$("#search-header").submit()})});var country=[{282:"Argentina"},{236:"Australia"},{513:"BBB"},{502:"Bolivia"},{246:"Brazil"},{275:"Brunei"},{313:"Bulgaria"},{229:"Cambodia"},{269:"Canada"},{289:"China"},{311:"Costa Rica"},{504:"Croatia"},{523:"Cu Chi"},{308:"Cuba"},{296:"Czech Republic"},{287:"Ecuador"},{291:"Egypt"},{508:"Fiji"},{304:"France"},{301:"Germany"},{306:"Ghana"},{273:"Greece"},{310:"Guatemala"},{295:"Hong Kong"},{277:"Hungary"},{226:"India"},{507:"Indonesia"},{506:"Iran"},{272:"Italy"},{298:"Japan"},{262:"Kenya"},{307:"Korea"},{286:"Lebanon"},{300:"Lithuania"},{231:"Malaysia"},{267:"Mexico"},{276:"Morocco"},{317:"Myanmar (Burma)"},{248:"Nepal"},{274:"Netherlands"},{251:"New Zealand"},{284:"Panama"},{257:"Peru"},{232:"Philippines"},{305:"Poland"},{294:"Portugal"},{319:"Romania"},{281:"Russia"},{255:"Samoa"},{503:"Singapore"},{501:"Slovenia"},{239:"South Africa"},{278:"Spain"},{314:"Taiwan"},{263:"Tanzania"},{225:"Thailand"},{315:"The World - Travel Passes"},{244:"Turkey"},{505:"Uganda"},{312:"United Arab Emirates"},{238:"USA"},{224:"Vietnam"}],countryDest={282:[{127:"Mendoza"}],236:[{82:"Brisbane"},{59:"Sydney"},{102:"Test"}],513:[{229:"B Des"}],502:[{205:"La Paz"}],246:[{73:"Foz do Iguassu"},{65:"Rio de Janeiro"}],275:[{89:"Brunei"}],313:[{168:"Sofia"}],229:[{57:"Phnom Penh"},{56:"Siem Reap"}],269:[{81:"Toronto"}],289:[{123:"Beijing"},{161:"Shanghai"},{157:"Xian"}],311:[{169:"San Jose"}],504:[{208:"Split"}],523:[{231:"Phuoc Hiep"}],308:[{164:"Havana"}],296:[{136:"Prague"}],287:[{116:"Quito"}],291:[{128:"Cairo"},{200:"Dahab"},{201:"Sharm el Sheikh"}],508:[{217:"Nadi"}],304:[{150:"Paris"}],301:[{145:"Berlin"}],306:[{154:"Accra"},{158:"Kumasi"}],273:[{87:"Athens"},{204:"Kastoria"},{108:"Thessaloniki"}],310:[{165:"Panajachel"}],295:[{135:"Hong Kong"}],277:[{90:"Budapest"}],226:[{216:"Agra"},{53:"Delhi"},{137:"Kochi"},{159:"Mumbai"}],507:[{215:"Bali"}],506:[{211:"Tehran"}],272:[{86:"Florence"},{91:"Rome"},{139:"Venice"}],298:[{140:"Kyoto"},{163:"Tokyo"}],262:[{75:"Nairobi"}],307:[{156:"Seoul"}],286:[{115:"Beirut"}],300:[{143:"Vilnius"}],231:[{162:"Kuala Lumpur"},{214:"Penang"}],267:[{78:"Merida"},{170:"Mexico City"}],276:[{176:"Essaouira"},{92:"Marrakech"}],317:[{175:"Yangon"}],248:[{66:"Kathmandu"},{67:"Pokhara"}],274:[{88:"Amsterdam"}],251:[{68:"Auckland"},{107:"Queenstown"}],284:[{111:"Panama City"}],257:[{72:"Cusco"},{71:"Lima"}],232:[{83:"Boracay"}],305:[{152:"Krakow"}],294:[{149:"Lisbon"},{167:"Porto"}],319:[{177:"Bucharest"}],281:[{144:"Moscow"},{98:"St. Petersburg"}],255:[{70:"Apia"}],503:[{206:"Singapore"}],501:[{203:"Ljubljana"}],239:[{63:"Johannesburg"}],278:[{93:"Barcelona"},{207:"Madrid"},{171:"San Sebastian"}],314:[{172:"Taipei"}],263:[{76:"Arusha"},{213:"Zanzibar"}],225:[{55:"bangkok"},{77:"Chiang Mai"}],315:[{212:"North America Passes"},{174:"South East Asia Passes"}],244:[{74:"Cappadocia"},{64:"Istanbul"}],505:[{210:"Kampala"}],312:[{166:"Dubai"}],238:[{118:"Annapolis"},{155:"Boston"},{109:"Charlotte"},{112:"Detroit"},{142:"Houston"},{61:"Los Angeles"},{95:"Philadelphia"},{62:"San Francisco"},{117:"Washington, D.C."}],224:[{54:"Hanoi"},{58:"Ho Chi Minh City"},{120:"Hoi An"},{119:"Hue"},{218:"TY test DES"}]},destTrip={127:[{257:"The Real Mendoza"}],82:[{906:"The Best of Brisbane "},{907:"Craft Beer and Convicts "}],59:[{371:"Kings Cross â€“ Crime & Passion"},{422:"Sydney With Conviction"},{467:"When Rum Ran the Rocks"}],102:[{389:"Test Tour"},{461:"Snowy Flower"},{823:""},{986:"Australia Test Discovery"}],229:[{960:"B Tour"}],205:[{828:"To 3,600 Metres, and Beyond"},{829:"Food With Altitude"}],73:[{97:"Iguassu Falls of Brazil"},{98:"Iguassu Falls of Argentina"}],65:[{70:"Santa Teresa Discovery"},{71:"Carioca Experience"},{272:"Corcovado, Christ Statue and Favela tour"},{401:"Total Rio Tour - Full Day Rio de Janeiro Tour"},{427:"Favela Tour Experience"}],89:[{132:"Brunei Water Village Experience"},{133:"Brunei Proboscis Monkey River Safari"}],168:[{449:"Breakfast with Sofia "},{450:"Sofia Food, Heritage, and Culture Tour "}],57:[{52:"Phnom Penh's Past"},{53:"Temples and Tastes of Phnom Penh "},{55:"Mekong Sunset"}],56:[{54:"Active Angkor"},{56:"Tonle Sap Secrets"},{57:"Angkor Adventure"},{477:"Siem Reap Street Food by Night"}],81:[{116:"Kensington Market & Chinatown"},{117:"Beer Makes History Better"},{441:"When Pigs Fry"}],123:[{266:"Beijing by Bike"},{267:"Beijing Insight "},{268:"Beijing Art & Architecture"},{269:"Great Wall Experience"},{425:"Real Beijing Gourmet"}],161:[{387:"Old Shanghai"},{475:"Shanghai for Food Lovers"}],157:[{354:"Active Xian"},{355:"Real Xiâ€™an Gourmet"}],169:[{443:"Costa Rica Pura Vida Experience"},{451:"Tropical Rainforest and Chocolate Adventure"},{482:"San Jose Bites and Sights Tour"},{483:"Cartago Bike & Train Tour"},{488:"The Art of Craft Beer in San Jose"},{843:"Home Cooked San Jose"},{862:"San Jose by Night"},{901:"Custom San Jose: San Jose Private Tour"}],208:[{857:"Secrets of Split"},{871:"Game of Thrones "}],231:[{945:"Cho Noi"}],164:[{438:"Afro-Cuban Religion Tour"},{439:"Classic American Car Tour of Havana"},{440:"Old Havana Walking Tour"}],136:[{280:"Prague Discovery"},{281:"Prague Castle & Little Quarter Tour"},{282:"Prague Explorer"},{283:"Prague Unveiled"},{391:"Prague Beer and Czech Tapas Tour"},{463:"Bohemian Prague Tour"}],116:[{341:"Quito Sweet & Culinary Experience"},{229:"Quito Market Discovery"},{228:"Old Town & Gastronomic Tour"},{312:"Condors and Culture in Otavalo"},{357:"Tsachilas Community"}],128:[{379:"Alexandria City Discovery"},{381:"Saqqara and Memphis"},{383:"Islamic Cairo in Depth"},{851:"Downtown Cairo"},{852:"Half Day Pyramids Adventure"}],200:[{802:"4 x 4 Desert Adventure Safari (Dahab)"},{803:"Explore St. Catherine and Climb Mt. Sinai (Dahab)"},{804:"From Matamir to Nawamis: Sinai Desert Camel Trek (Dahab)"},{810:"Egyptian Farming 101 (Dahab)"},{814:"Egyptian Snorkel Adventure (Dahab)"},{815:"Egyptian Desert Experience (Dahab)"},{920:"Dahab Discover Dive"}],201:[{805:"4 x 4 Desert Adventure Safari (Sharm el-Sheikh)"},{806:"From Matamir to Nawamis: Sinai Desert Camel Trek (Sharm el-Sheikh)"},{807:"Explore St. Catherine and Climb Mt. Sinai (Sharm el-Sheikh)	"},{812:"Egyptian Farming 101 (Sharm el-Sheikh)"},{816:"Egyptian Snorkel Adventure (Sharm el-Sheikh)"},{818:"Egyptian Desert Experience (Sharm el-Sheikh)"},{819:"Discover Dahab (Sharm el-Sheikh)"}],217:[{923:"Fiji Food Safari"},{924:"Sunday in Nadi"}],150:[{314:"Secret Paris: Cheese, Art, and Local Life"},{315:"Experience Bohemian Paris"},{400:"Classic Paris Bike Tour"}],145:[{297:"Hidden Berlin"},{298:"Storyline of Berlin"},{444:"Food and Art in Funky Kreuzberg"},{476:"Stories From Friedrichshain: An Interactive Theatre Tour"}],154:[{344:"Unearth Accra Walking Tour"},{345:"Old and New Accra Experience"},{346:"Accra Markets Explorer"},{347:"Accra Architectural Discovery"},{348:"West African Markets and Cuisine"},{349:"Artistic Side of Accra"}],158:[{362:"Kumasi Africa Market Tour"},{363:"Kumasi Traditional Cooking Tour"},{364:"Kumasi Voodoo Experience"},{365:"Kumasi Local Night Life tour"}],87:[{136:"Walking Athens"},{137:"Markets, Ruins & Ancient Athens"},{404:"Taste of Athens"}],204:[{825:"Home Cooked Kastoria"}],108:[{190:"Hidden Markets of Thessaloniki"},{191:"Tastes of Thessaloniki"}],165:[{428:"Atitlan Kayak & Trekking"}],135:[{261:"Around Kowloon in 8 Markets"},{264:"The Story of Hong Kong"},{368:"Old vs New Hong Kong"}],90:[],216:[{919:"Ageless Agra"}],53:[{34:"Home Cooked Delhi"},{35:"Gandhi's Delhi"},{36:"Culture Vulture Delhi"},{408:"Delhi Food Walk"},{487:"Hop On, Hop Off Bus pass plus Food Walk Delhi"},{867:"Custom Delhi: Delhi Private Tour"}],137:[{259:"Fort Kochi by Bike"},{406:"Backwaters of Kerala"},{407:"Ayurveda & Backwaters of Kerala"},{848:"Festivals of Kochi and Kerala"},{801:"Home Cooked Kochi"},{808:"Kochi Food and Culture Tour"},{809:"Kochi Bike and Backwaters"}],159:[{367:"Mumbai Highlights"},{421:"Bollywood Treats"},{420:"Mumbai Masala"},{856:"Mumbai Iftar Party"}],215:[{913:"VW Kombi Cocktail Safari "}],211:[{869:"Beyond Tehran"},{870:"Persian Hospitality"}],86:[{409:"Florence Markets & Delis"},{410:"Florence Foodies Walk"},{411:"Aperitivo Time! Florence Wine Tour"},{889:"Custom Florence: Florence Private Tour"}],91:[{134:"Roman Dolce Vita"},{255:"Trastevere: Trends and Tradition "},{294:"Ancient Rome: Archaeological Discovery Tour"}],139:[{290:"Cicchetti of Venice Tour"},{845:"Cicchetti, Wein und Tavern Tour"},{858:"Yoga, Beach & Brunch"}],140:[{270:"Kyoto Cycling Tour"},{271:"City of Culture Kyoto"},{826:"Custom Kyoto: Kyoto Private Tour"}],163:[{827:"Custom Tokyo: Tokyo Private Tour"}],75:[{92:"Nairobi Experience"},{93:"Parks, Giraffes & Karen Blixen"},{94:"Hell's Gate National Park"},{821:"Nairobi by Night"}],156:[{350:"The Soul of Seoul "},{351:"The Street Museum in the Urban Core"}],115:[{217:"Bourj Hammoud Craftsmen"}],143:[{318:"Undiscovered Vilnius "},{865:"Flavours of Vilnius "}],162:[{405:"KL Food Experience"},{866:"Tastes of Ramadan "}],214:[{908:"Tastes and Traditions in Penang"}],78:[{102:"Home Cooking: Yucatan Style"}],170:[{452:"Beyond Mexico City: Hidden Teotihuacan & Family Dinner"},{453:"Mexico City Markets and Food Tour"},{455:"Mexican Night Out: Cantinas, Mariachi & Lucha Libre"},{456:"Teotihuacan, Mexico City Markets & Food Experience"}],176:[{489:"Essaouira Insider"},{813:"Gnawa Music Experience"},{859:"VIP Gnawa Music Experience Festival Tour"},{899:"Custom Essaouira: Essaouira Private Tour"}],92:[{141:"Tajine Cookery Class"},{143:"Medina, Palaces & Tombs"},{465:"A Taste of Marrakech: Inside the Medina"},{911:"Essaouira Insider"}],175:[{478:"Tradition and Culture in Yangon"},{479:"Let Yangon Take You For a Ride"},{921:"Yangonâ€™s Streets by Night"}],66:[{72:"Kathmandu by Bike"},{73:"Spiritual Nepal"},{74:"Kathmandu Living"},{75:"Path to a Hidden Monastery"},{170:"Rickshaw Night Explorer"},{464:"Exploring Patan and Bhaktapur: Kathmandu Valleyâ€™s Other Kingdoms"}],67:[{76:"Pokhara by Bike"},{77:"Pokhara Hike"}],88:[],68:[{964:"Tour Test"}],107:[{184:"Alleyways of Queenstown"},{186:"Art & Nature of Queenstown"}],111:[{211:"Panama Canal and City Adventure"},{212:"Panama City Jungle Experience"},{491:"Taste of Panama City"}],72:[{86:"Sacred Valley In Depth"},{87:"Cusco Ruins & Market Walking Tour"},{332:"Machu Picchu Full Day Tour"},{493:"Cusco Pisco Making"}],71:[{89:"Lima Discovery"},{330:"Lima Coast Biking Tour"},{331:"Road to Pachacamac Biking Tour"},{494:"Lima Gastronomic Experience"}],83:[{124:"Off the Beaten Track Boracay"},{125:"Malay Rural Experience"}],152:[{335:"Jewish Krakow Adventure"},{336:"Polish Krakow Adventure"},{390:"Communist Krakow Adventure"},{474:"Home Cooked Krakow"},{868:"Krakow Food by Foot"}],149:[{316:"Experience Lisbon Walk"},{317:"Lisbon Sunset Fado & Tapas "}],167:[{442:"Experience Portoâ€™s Bites and Sights"}],177:[{800:"Home Cooked Bucharest"}],144:[{300:"Moscow Up Close and Personal"},{301:"Moscow Bunker & Underground"}],98:[{156:"St Petersburg Discovery"},{208:"St Petersburg Like a Local"}],70:[{84:"Cultural Secrets of Samoa"}],206:[{840:"Chinatown Food Adventure"},{953:"Tour Singapore Test"}],203:[{822:"Ljubljana Bites & Sights"}],63:[{68:"Cycle Soweto"},{69:"Jozi by Foot"}],93:[{417:"Barcelona Tapas Tour â€œen el barrioâ€"},{820:"Snapshots of Barcelona"}],207:[{849:"Madrid Tapas Adventure"},{850:"Madrid Then and Now"}],171:[{457:"Hondarribi Town and Basque Sports Tour"},{458:"St. James Way Adventure"},{460:"Grab Your Pintxo"},{872:"Custom San Sebastian: San Sebastian Private Tour"},{874:"Home Cooked San Sebastian"}],172:[{466:"Beyond Taipei: Discovering Danshui"},{486:"Downtown Taipei Art Tour"},{835:"Ningxia Night Market Tour"},{905:"Taipei Taxi Diary"}],76:[{95:"Arusha Village Experience"},{96:"Amani Children's Home & Village Visit"}],213:[{887:"Zesty Zanzibar "},{888:"Handmade Zanzibar"}],55:[{17:"Bangkok by Bike"},{19:"Bangkok Chinatown Food Discovery"},{20:"Temple & River of Kings"},{991:"Bangkok Private code tour"},{996:"Bangkok private group tour"}],77:[{99:"Chiang Mai Mind & Soul"},{100:"Mae Ping River Experience"}],212:[{876:"The Northeast Loop"}],174:[{468:"Bangkok to Hanoi Pass"},{480:"Bangkok to Ho Chi Minh City Pass"},{481:"Ho Chi Minh City to Hanoi Pass"},{980:"Testtour"}],74:[{90:"Heart of Cappadocia"},{91:"Underground Cappadocia"},{296:"Handicrafts Renaissance in Avanos"}],64:[{66:"Istanbul Uncovered"},{67:"Old & New Istanbul"},{413:"Istanbul Street Food Picnic"},{915:"Istanbul Conquered "},{916:"Istanbul Night Tasting Trail "}],210:[{864:"Refugee Community Tour"},{892:"Grassroots Kampala"},{894:"Kisenyi Slum"},{895:"Traditional Doctor Tour"}],166:[{448:"The Bright Lights and Nightlife of Dubai"}],118:[{238:"Explore the Heart of Annapolis"},{239:"Annapolis Unveiled"},{955:"Tour Test"}],155:[{360:"Pizza & Little Italy Boston"},{361:"Revolutionary Tavern Tour "}],109:[{192:"Taste & Cycle Charlotte"},{193:"Southern Food Tour - Half-Day Bike Tour"}],112:[{215:"The D You Must See"},{216:"Detroit's Rise, Fall & Renewal"}],142:[{284:"Heart of the Tunnel Walk"},{285:"Historic Downtown Pub Tour"}],61:[{63:"Historic Hollywood Stars & Bars"},{414:"Ethnic Neighborhoods Food & Culture"},{419:"Beverly Hills: Beyond the Botox"},{424:"Hidden Hollywood"},{896:"Custom Los Angeles: Los Angeles Private Tour"},{914:"LA Getaway"}],95:[{187:"Italian Market Immersion"},{162:"Essence of South Philly"},{207:"Philly On Tap"},{337:"The Soul of Center City"},{384:"History in HD"},{385:"Street Food for Thought"},{412:"Center City Holiday Tour"},{484:"Custom Philadelphia: Philadelphia Private Tour"}],62:[{62:"Bridge and the Beach"},{242:"North Beach Walking Pub Tour"},{838:"Flavors and Murals of the Mission"},{839:"San Francisco Private Tour"},{853:"Teas, Temples, and Beatniks"}],117:[{394:"Washington DC Unveiled"},{395:"Fun Food & Finds in DC"},{873:"Monuments by Night"}],54:[{30:"Hanoi Sunrise"},{31:"Hanoi Highlights"},{32:"Ha long bay"},{40:"Mai Chau Short Trek"},{42:"Citadels, Karsts & Cycle"},{403:"Hanoi Street Food by Night"},{855:"Hanoi Private Tour"},{941:"Gom Su Ha Noi"},{994:"A Private group tour"},{995:"A Insider city tour"}],58:[{26:"Mekong Discovery"},{27:"Ho Chi Minh Discovery"},{28:"Cyclos & Markets"},{29:"Cu Chi Tour"},{41:"Temples & Tunnels"},{861:"Saigon Street Food by Night"},{925:"Suoi Tien"},{927:"Ho chi minh cu chi"},{982:"Tour Test"},{930:"Dai Nam experience"},{933:"Dam Sen "},{935:"Van Thanh Part"},{937:"Bao Tang"},{956:"Le Hoi Dua Ben Tre"},{983:"Tour 2"},{985:"Tre Viet"},{998:"Cu Chi - Private Group"}],120:[{243:"Hoi An Walking & Cooking Class "},{244:"Hoi An Boat & Bike"},{860:"Hoi An Food Adventure"},{932:"Hoi An tour"},{981:"Pho Co Hoi An Tour"},{977:"Tour Hoi An"}],119:[{929:"Co Do Hue Experience"},{938:"Co Do Hue"},{973:"Con Son Dao Ngoc Tour"}],218:[{926:"Ba Na Hill "},{965:"Snowy Hill"},{978:""},{987:"AAA Tour"},{988:"Island Tour"}]},Whl={};Object.extend=function(e,t){for(var a in t)e[a]=t[a];return e},function(){Object.extend(Object,{getClassName:function(e){var t=Object.prototype.toString.call(e);return t.match(/^\[object\s(.*)\]$/)[1]},isUndefined:function(e){return"undefined"==typeof e},isNumber:function(e){return"Number"===Object.getClassName(e)},isString:function(e){return"String"===Object.getClassName(e)},isArray:function(e){return"Array"===Object.getClassName(e)},isFunction:function(e){return"function"==typeof e},isObject:function(e){return"object"==typeof e},getKeys:function(e){var t=[];for(var a in e)t.push(a);return t},getValues:function(e){var t=[];for(var a in e)t.push(e[a]);return t}})}(),function(){function e(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t}Object.extend(Function.prototype,{bind:function(t){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;var a=this,i=Array.prototype.slice.call(arguments,1);return function(){return a.apply(t,i.concat(e(arguments)))}},bindEvent:function(e){var t=this,a=Array.prototype.slice.call(arguments,1);return function(i){var r=Array.prototype.slice.call(arguments,1);return a=a.concat(r),t.apply(e,a.concat([i||window.event]))}}})}(),Object.extend(String.prototype,{trim:function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")},isEmail:function(){return-1==this.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]{2,6}$/)?!1:!0},isUrl:function(){return-1==this.search(/^(http|https):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?(\/)?/i)?!1:!0},autoUrl:function(e){var t=this.replace(/[^0-9a-zA-Z]/g," ");return t=t.replace(/\s\s+/g," ").trim(),t=t.replace(/\s/g,e||"-")},autoUrl2:function(e){var t=this.replace(/[^0-9a-zA-Z]/g," ");return t=t.replace(/\s\s+/g," ").trim(),t=t.replace(/\s/g,e||"-"),t.toLowerCase()},compare:function(e){return this==e}}),Number.compareFloat=function(e,t){return e=parseFloat(e),t=parseFloat(t),e==t?0:t>e?-1:1},Date.compareDate=function(e,t,a){a||(a=0);var i=1==a?1:0,r=new Array;if(r[0]=/^\d{1,2}(\-|\/|\.|\s)\d{1,2}(\-|\/|\.|\s)\d+$/,r[1]=/^\d{1,2}(\-|\/|\.|\s)\d{1,2}(\-|\/|\.|\s)\d+$/,-1==e.search(r[i])||-1==t.search(r[i]))throw"Invalid date";var o=-1!=e.indexOf("-")?"-":-1!=e.indexOf("/")?"/":-1!=e.indexOf(".")?".":-1!=e.indexOf(" ")?" ":"",n=-1!=t.indexOf("-")?"-":-1!=t.indexOf("/")?"/":-1!=t.indexOf(".")?".":-1!=t.indexOf(" ")?" ":"";if(""==o||""==n)throw"Invalid date";var s=e.split(o),l=t.split(n);if(3!=s.length||3!=l.length)throw"Invalid date";if(1==i)var u=s[2],d=l[2],c=s[0],h=l[0],p=s[1],m=l[1];else var u=s[2],d=l[2],c=s[1],h=l[1],p=s[0],m=l[0];var g=null;return g=Number.compareFloat(u,d),0!=g?g:(g=Number.compareFloat(c,h),0!=g?g:(g=Number.compareFloat(p,m),0!=g?g:0))},Date.compareDate2=function(e,t){var a=/^\d{1,2}\s[A-Z][a-z]{2}\s[0-9]{4}$/;if(-1==e.search(a)||-1==t.search(a))throw"Invalid Date";e=e.split(" "),t=t.split(" ");var i={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12};for(var r in i)if(r==e[1]){e[1]=i[r];break}for(var r in i)if(r==t[1]){t[1]=i[r];break}var o=null;return o=Number.compareFloat(e[2],t[2]),0!=o?o:(o=Number.compareFloat(e[1],t[1]),0!=o?o:(o=Number.compareFloat(e[0],t[0]),0!=o?o:0))},Date.toDate=function(e){var t=/^\d{1,2}\s[A-Z,a-z]{3}\s\d{2,4}$/,a=new Date;if(null==e.match(t))return 0;e=e.split(" ");var i={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},r=!1;e[1]=e[1].toLowerCase();for(var o in i)if(o==e[1]){a.setMonth(i[o]),r=!0;break}return r?(e[2]=parseFloat(e[2]),a.setDate(e[0]),a.setYear(e[2]>100?e[2]:e[2]+2e3),a):0},Date.prototype.toDateStringExt=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return 0==this.valueOf()?"":this.getDate()+" "+e[this.getMonth()]+" "+this.getFullYear()},Date.prototype.toDateTimeString=function(){return 0==this.valueOf()?"":this.toDateStringExt()+" "+this.getHours()+":"+this.getMinutes()+":"+this.getSeconds()},Whl.Combo={},Object.extend(Whl.Combo,{get:function(e){var t=Object.isString(e)?document.getElementById(e):e;return Object.isObject(t)?Object.isFunction(t.addItem)?t:(Object.extend(t,{addItem:function(e){return Object.isUndefined(e.selected)?this.options.add(new Option(e.text,e.value)):this.options.add(new Option(e.text,e.value,e.selected)),this},addItems2:function(e){for(var t in e){var a={};for(var i in e[t]){a.text=e[t][i],a.value=i;break}this.addItem(a)}},removeItem:function(e){return this.options[e]=null,this},deselectAll:function(){for(var e=0;e<this.options.length;e++)this.options[e].selected=!1;return this},selectAll:function(){for(var e=0;e<this.options.length;e++)this.options[e].selected=!0;return this},removeAll:function(){return this.length=0,this},hasItem:function(){return this.options.length>0?!0:!1},removeSelected:function(){for(var e=this.options.length-1;e>=0;e--)this.options[e].selected&&this.removeItem(e);return this},getObjValue:function(e,t){for(var a=e,t=t||!1,i=[],r=this.options.length-1;r>=0;r--){var o=this.options[r],n=null;a?o.selected&&(n={text:o.text,value:o.value}):n={text:o.text,value:o.value},null!=n&&(i.push(n),t&&this.removeItem(r))}return i},addItems:function(e,t){for(var a in e){var i=e[a];if(Object.isUndefined(t))this.addItem(i);else{for(var r=!1,o=0,n=t.length;n>o;o++)if(t[o]==i.value){r=!0;break}r||this.addItem(i)}}return this},addItemObj:function(e,t,a,i){for(var r in e){var o=e[r],n={text:"",value:""};for(var s in o)s==t?n.text=o[s]:s==a&&(n.value=o[s]);this.addItem(n)}return this.setSelectedItems(i),this},getValues:function(e){for(var t=e||!1,a="",i=0,r=this.options.length;r>i;i++){var o=this.options[i];a+=t?(a?",":"")+o.value:(a?",":"")+o.value}return a},setSelectedItems:function(e){if(Object.isArray(e))for(var t in e)for(var a=0,i=this.options.length;i>a;a++)if(e[t]==this.options[a].value){this.options[a].selected=!0;break}return this},getValue:function(){return this.options[this.selectedIndex].value}}),t):null}}),Whl.Combo.Double=function(e,t,a,i){this._src=Whl.Combo.get(e),this._dest=Whl.Combo.get(t),this._data=null,this._url=null,this._opt=i||{},this._opt.param=this._opt.param||{},this._opt.excludeElm=this._opt.excludeElm||null,this._opt.paramId=this._opt.paramId||[],this._opt.defaultItems=this._opt.defaultItems||[],this._opt.callback=this._opt.callback||function(){},Object.isObject(a)?this._data=a:Object.isString(a)&&(this._url=a),this._initialize()},Whl.Combo.Double.prototype={_initialize:function(){null!=this._url?$(this._src).change(this.getData.bind(this,null)):$(this._src).change(this.load2.bind(this))},_makeParam:function(){var e="";for(var t in this._opt.param)e+=(e?"&":"")+t+"="+this._opt.param[t];for(var t in this._opt.paramId)e+=(e?"&":"")+this._opt.paramId[t]+"="+$("#"+this._opt.paramId[t]).val();return e},getData:function(){var e=this._makeParam();e+=(e?"&":"")+Whl.getToken()+"&"+$.param($(this._src));var t={type:"POST",url:this._url,dataType:"json",data:e,success:this.load.bind(this),error:function(e,t){Whl.Dialog.error({msg:t})}};$.ajax(t)},load:function(e){if(this._dest.removeAll(),0<this._opt.defaultItems.length)for(var t in this._opt.defaultItems)this._dest.addItem(this._opt.defaultItems[t]);if(this._opt.excludeElm){var a=Whl.Combo.get(this._opt.excludeElm).getValues(!0);this._dest.addItems(e,a.split(","))}else this._dest.addItems(e)},load2:function(){this._dest.removeAll();var e=$(this._src).val();if(0<this._opt.defaultItems.length)for(var t in this._opt.defaultItems)this._dest.addItem(this._opt.defaultItems[t]);if(!Object.isUndefined(this._data[e])){var a=this._data[e];this._dest.addItems2(a)}this._opt.callback.call(this)},setCallback:function(e){this._opt.callback=e}},Whl.Dialog={},Object.extend(Whl.Dialog,{show:function(e){var t={title:"Loading",msg:"Loading data ... Please wait!.",id:"msg",icon:"ui-icon-info",contCss:"",container:"body",buttons:{},hideClose:!1,remove:!1,dlgOpt:{},callback:function(){}};
    !Object.isUndefined(e)&&Object.isObject(e)&&Object.extend(t,e);var a='<div id="{id}_dlg" title=""><p id="{id}_cont" style="margin-top: 15px; border:0px"><span id="{id}_icon" class="ui-icon" style="float:left; margin:0px 7px 70px 0px;"></span><span id="{id}_text"></span></p></div>';a=a.replace(/{id}/g,t.id);var i=$(t.container+" #"+t.id+"_dlg");if(0==i.size())$(t.container).append(a);else if(1<i.size())throw"Invalid";a=$(t.container+" #"+t.id+"_dlg"),a.attr("title",t.title),""!=t.contCss&&$(t.container+" #"+t.id+"_cont").addClass(t.contCss),$(t.container+" #"+t.id+"_icon").addClass(t.icon),$(t.container+" #"+t.id+"_text").html(t.msg);var r={bgiframe:!0,autoOpen:!1,closeOnEscape:!1,width:270,height:"auto",minHeight:100,resizable:!0,modal:!0};r.close=function(){t.callback(),t.remove&&$(this).dialog("destroy").remove()},r.open=function(){var e=$(this).siblings().find("button");2==e.length&&$(e[1]).focus()},Object.extend(r,{buttons:t.buttons}),Object.extend(r,t.dlgOpt),a.dialog(r),t.hideClose&&a.parents(".ui-dialog").find(".ui-dialog-titlebar-close").hide(),a.dialog("open")},msg:function(e){var t={hideClose:!1,dlgOpt:{resizable:!1},buttons:{Close:function(){$(this).dialog("close")}}};!Object.isUndefined(e)&&Object.isObject(e)&&Object.extend(t,e),this.show(t)},confirm:function(e){var t={icon:"ui-icon-info",contCss:"ui-state-highlight"};!Object.isUndefined(e)&&Object.isObject(e)&&Object.extend(t,e),this.show(t)},del:function(e,t){var a={title:"Delete data",msg:"Do you want to delete this item.?",id:"delete",buttons:{Cancel:function(){$(this).dialog("close")},Ok:function(){$(this).dialog("close"),e()}}};!Object.isUndefined(t)&&Object.isObject(t)&&Object.extend(a,t),this.confirm(a)},error:function(e){e=e||{};var t={title:"Error occurs",icon:"ui-icon-alert",contCss:"ui-state-error",id:"err",buttons:{Close:function(){$(this).dialog("close")}},dlgOpt:{resizable:!1,maxWidth:300,height:"auto",maxHeight:300}};Whl.isErrReq(e.msg)&&(e.msg=e.msg.substring(4)),Object.extend(t,e),this.show(t)},close:function(e,t){var a=$("#"+e+"_dlg").dialog("close");Object.isUndefined(t)||a.remove()},closeMsg:function(e){this.close("msg",e)}}),function(){Object.extend(Whl,{openWin:function(e){window.open(e,"")},validate:function(e,t,a,i){var r=null,o=!0;t=t||"form","form"!=t&&(t="#"+t);for(var n=0,s=e.length;s>n;n++){var l=e[n],u=!0,d=$(t+" #"+l[0]),c=null;if(d.isExist()&&!d.get(0).disabled){if(Object.isFunction(l[1]))u=l[1](),c=l[2];else for(var h in l[1]){var p=null;if(Object.isArray(l[1][h])?(p=l[1][h],c=p[0]):c=l[1][h],"blank"==h?u=d.isBlank():"email"==h?u=d.isEmail():"url"==h?u=d.isUrl():"domain"==h?u=d.isDomain():"isDate"==h?u=0!=Date.toDate(d.val()):"gtDate"==h&&p[1]?u=d.gtDate(t+" #"+p[1]):"gteqDate"==h&&p[1]?u=d.gtDate(t+" #"+p[1],!0):"ltDate"==h&&p[1]?u=d.ltDate(t+" #"+p[1]):"lteqDate"==h&&p[1]?u=d.ltDate(t+" #"+p[1],!0):"ltDate2"==h&&p[1]?u=d.ltDate2(p[1]):"eqString"==h&&p[1]?u=d.eqString(t+" #"+p[1]):"gtNumber"==h&&p[1]&&(u=d.gtNumber(t+" #"+p[1])),!u){null==r&&(r=d);break}}var m=a?$("#"+a):$(t+" #"+d.attr("id")+"Invalid");if(u)m.html(""),m.removeClass("error").addClass("error-hide");else if(m.html(c),m.removeClass("error-hide").addClass("error"),null==r&&(r=d),o=u,null!=i&&!i)return r.focus(),!1}}return o||null==r?!0:(r.focus(),!1)},validate_obj:function(e,t,a,i){var r=null,o=!0;t=t||"form","form"!=t&&(t="#"+t);for(var n=0,s=e.length;s>n;n++){var l=e[n],u=!0,d=$(t+" #"+l[0]),c=null;if(d.isExist()&&!d.get(0).disabled){if(Object.isFunction(l[1]))u=l[1](),c=l[2];else for(var h in l[1]){var p=null;if(Object.isArray(l[1][h])?(p=l[1][h],c=p[0]):c=l[1][h],"blank"==h?u=d.isBlank():"email"==h?u=d.isEmail():"url"==h?u=d.isUrl():"domain"==h?u=d.isDomain():"isDate"==h?u=0!=Date.toDate(d.val()):"gtDate"==h&&p[1]?u=d.gtDate(t+" #"+p[1]):"gteqDate"==h&&p[1]?u=d.gtDate(t+" #"+p[1],!0):"ltDate"==h&&p[1]?u=d.ltDate(t+" #"+p[1]):"lteqDate"==h&&p[1]?u=d.ltDate(t+" #"+p[1],!0):"ltDate2"==h&&p[1]?u=d.ltDate2(p[1]):"eqString"==h&&p[1]?u=d.eqString(t+" #"+p[1]):"gtNumber"==h&&p[1]&&(u=d.gtNumber(t+" #"+p[1])),!u){null==r&&(r=d);break}}var m=a?$("#"+a):$(t+" #"+d.attr("id")+"Invalid");if(u)m.html(""),m.removeClass("error").addClass("error-hide");else if(m.html(c),m.removeClass("error-hide").addClass("error"),null==r&&(r=d),o=u,null!=i&&!i)return r.focus(),r}}return o||null==r?r:(r.focus(),r)},getToken:function(){return"token="+$("#token").val()},isErrReq:function(e){return-1!=e.indexOf("WRN:")},isJson:function(e){return-1!=e.search(/^(\{(.*)\}|\[(.*)\])$/)},getCookie:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var a=document.cookie.indexOf(";",t);return-1==a&&(a=document.cookie.length),unescape(document.cookie.substring(t,a))}}return null},setCookie:function(e,t,a){a="undefined"==typeof a?7:a;var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var r="; expires="+i.toGMTString();return document.cookie=e+"="+t+r+"; path=/",this},rand:function(e){return Math.round(Math.random()*e)},getMore:function(){$(".cont-more").each(function(){var e=this.id.split("-");$(this).click(function(t){t.preventDefault(),$("#"+e[1]+"-detail").removeClass("ui-hide").show(),$(this).remove()})})},toggleContent:function(e){e=$.extend({controlHideClass:"point01",controlShowClass:"point"},e),$("[id^='toggle']").each(function(){$(this).click(function(t){t.preventDefault();var a=this.id,i=a.substring("toggle-".length,a.length);$(this).hasClass(e.controlShowClass)?($(this).removeClass(e.controlShowClass),$(this).addClass(e.controlHideClass),$("#"+i).hide()):($(this).removeClass(e.controlHideClass),$(this).addClass(e.controlShowClass),$("#"+i).show())})})}})}(),Whl.UA={},Object.extend(Whl.UA,{initSearch:function(){var countryName;if(jQuery(".dest-query").autocomplete({minLength:1,source:AUTOCOMPLETE.DESTLIST,select:function(e,t){return location=t.item.url,!1}}),jQuery(".tour-query").autocomplete({minLength:1,source:AUTOCOMPLETE.TOURLIST,select:function(e,t){return location=t.item.url,!1}}),jQuery(".dest-query, .tour-query").each(function(){jQuery(this).autocomplete("instance")._renderItem=jQuery.proxy(function(e,t){var a=jQuery(this).val(),i="<b>$1</b>",r=new RegExp("("+a+")","ig"),o=t.value;return jQuery("<li>").append("<a>"+o.replace(r,i)+"</a>").appendTo(e)},this)}),"undefined"==typeof IsEmbed||!IsEmbed){new Whl.Combo.Double("s-country","s-dest",window.countryDest,{defaultItems:[{text:"-- Select --",value:-1}],callback:function(){-1==this._src.getValue()&&this._dest.removeAll().addItem({text:"-- Select --",value:-1});var e=Whl.Combo.get("s-trip");e.removeAll().addItem({text:"-- Select --",value:-1})}}),new Whl.Combo.Double("s-dest","s-trip",window.destTrip,{defaultItems:[{text:"-- Select --",value:-1}],callback:function(){-1==this._src.getValue()&&this._dest.removeAll().addItem({text:"-- Select --",value:-1}),$("#s-trip").html($("#s-trip option").sort(function(e,t){return $(e).text()<$(t).text()?-1:1})),$("#s-trip").get(0).selectedIndex=0}}),$("#search").submit(function(){this.submit()}),$("#s-submit").click(function(event){if(countryName=$("#s-country option:selected").text(),Whl.setCookie("s-country",$("#s-country").val()),Whl.setCookie("s-dest",$("#s-dest").val()),Whl.setCookie("s-trip",$("#s-trip").val()),event.preventDefault(),parseInt($("#s-country").val())<=0)location.href="/sightseeing-day-tours";else{var destId=parseInt($("#s-dest").val()),tripId=parseInt($("#s-trip").val());if(destId>0&&0>=tripId)$.ajax({type:"POST",url:"/country?act=getUrlDest",data:"dest_id="+$("#s-dest").val(),success:function(_data){var base=$("#s-base"),data=eval("("+_data+")");$("#search").attr("action",(1==base.size()?base.val():"/")+"destination/"+data.uname+"-tours"),$("#search #act").remove(),$("#search").submit()}});else if(tripId>0)$.ajax({type:"POST",url:"/country?act=getUrlTour",data:"tour_id="+$("#s-trip").val(),success:function(_data){var base=$("#s-base"),data=eval("("+_data+")");$("#search").attr("action",(1==base.size()?base.val():"/")+data.uname),$("#search #act").remove(),$("#search").submit()}});else{var base=$("#s-base");$("#search").attr("action",(1==base.size()?base.val():"/")+"country?cn="+countryName),$("#search").append('<input type="hidden" name="act" id="act" value="default"/>'),$("#search").submit()}}});var country=Whl.getCookie("s-country");null!=country&&""!=country&&$("#s-country").val(country).change();var dest=Whl.getCookie("s-dest");null!=dest&&""!=dest&&$("#s-dest").val(dest).change();var trip=Whl.getCookie("s-trip");null!=trip&&""!=trip&&$("#s-trip").val(trip);var priceFrom=Whl.getCookie("s-price-from");null!=priceFrom&&""!=priceFrom&&$("#s-price-from").val(priceFrom);var priceTo=Whl.getCookie("s-price-to");null!=priceTo&&""!=priceTo&&$("#s-price-to").val(priceTo)}},initCurrency:function(){$("#currency").change(function(){var e=$("#frm-currency").serialize();jQuery.post("",e).always(function(){window.location.reload()})}),$("#currency2").change(function(){var e=$("#frm-currency2").serialize();jQuery.post("",e).always(function(){window.location.reload()})});var e=Whl.getCookie("currency");null!=e&&""!=e&&$("#currency").val(e)},initData:function(){function e(){"- password -"==$("#agent-pass").val()&&($("#agent-pass").replaceWith('<input type="password" class="tb_ac02" value="" name="uxPassword" id="agent-pass" >'),$("#agent-pass").blur(function(){t()}),$("#agent-pass").focus())}function t(){""==$("#agent-pass").val()&&($("#agent-pass").replaceWith('<input type="text" class="tb_ac02" value="- password -" name="uxPassword" id="agent-pass" >'),$("#agent-pass").click(function(){e()}))}var a=function(){if("- ref. number -"==this.value){var e=document.createElement("input");$(e).attr("name",$(this).attr("name")),$(e).attr("style",$(this).attr("style")),$(e).attr("class",$(this).attr("class")),$(this).replaceWith($(e)),$(e).blur(i).focus()}},i=function(){if(""==this.value){var e=document.createElement("input");$(e).attr("type","text"),$(e).attr("value","- ref. number -"),$(e).attr("name",$(this).attr("name")),$(e).attr("style",$(this).attr("style")),$(e).attr("class",$(this).attr("class")),$(this).replaceWith($(e)),$(e).focus(a)}};try{this.initCurrency(),this.initSearch()}catch(r){}$("#username").focus(function(){"- email -"==this.value&&(this.value="")}).blur(function(){""==this.value&&(this.value="- email -")}),$("#refno").focus(a),$("#news-email").focus(function(){"- your email -"==this.value&&(this.value="")}).blur(function(){""==this.value&&(this.value="- your email -")}),$("#agent-name").focus(function(){"- email address -"==this.value&&(this.value="")}).blur(function(){""==this.value&&(this.value="- email address -")}),$("#agent-pass").click(function(){e()}),$("#send-this-page").removeClass("ui-hide").dialog({bgiframe:!0,autoOpen:!1,width:620,height:"auto",modal:!0,open:function(){$(this).parents(".ui-dialog-buttonpane button:eq(1)").css("display","")},buttons:{Close:function(){$(this).dialog("close")},Send:function(){$("#frmSendPage").submit()}}}),$("#btnSendThisPage").click(function(){var e=encodeURIComponent(jQuery(this).attr("data-uri")||window.location.pathname),t=encodeURIComponent(jQuery(this).attr("data-name")||document.title),a=decodeURIComponent(jQuery(this).attr("data-sender-email")||""),i=decodeURIComponent(jQuery(this).attr("data-sender-name")||""),r=decodeURIComponent(jQuery(this).attr("data-message")||""),o=decodeURIComponent(jQuery(this).attr("data-subject")||""),n=decodeURIComponent(jQuery(this).attr("data-refno")||"0"),s=jQuery(this).attr("data-type")||0,l="/sendpage?uri="+e+"&title="+t;arguments[0].preventDefault(),$("#send-this-page").load(l,{},function(e){setTimeout(function(){$("#s_email").val(a),$("#s_fullname").val(i),$("#message").val(r),$("#subject").val(o),$("#srefno").val(n)},0),$(this).html(e).dialog("open"),$("#sec_num").forceNumber(),$("#type").val(s);var t=function(){var e=[];return e.push(["s_fullname",{blank:Message.errRequired}]),e.push(["s_email",{blank:Message.errRequired,email:Message.errInvalid}]),e.push(["r_fullname",{blank:Message.errRequired}]),e.push(["r_email",{blank:Message.errRequired,email:Message.errInvalid}]),e.push(["sec_num",{blank:Message.errRequired}]),e.push(["message",{blank:Message.errRequired}]),Whl.validate(e)};$("#send-this-page").parents().find(".ui-dialog-buttonpane button:eq(1)").css("display",""),$.browser.msie&&$("#s_fullname,#s_email,#r_fullname,#r_email,#sec_num").keypress(function(e){13==e.keyCode&&$("#frmSendPage").submit()}),$("#frmSendPage").submit(function(e){if(e.preventDefault(),t()){Whl.Dialog.msg({id:"send",title:"Sending",msg:"Please stand by while your email is being sent.",hideClose:!1,remove:!0}),$(".ui-button-text-only").addClass("button button-wide"),$(".ui-dialog-titlebar-close").removeClass("ui-state-default"),$(".ui-dialog-titlebar-close").hover(function(){$(this).removeClass("ui-state-hover")});var a={type:"POST",url:"/sendpage?act=send",dataType:"json",data:$("#frmSendPage").serialize(),success:function(e){"invalid"==e.data?$("#sec_numInvalid").html(e.msg):($("#send-this-page").html(e.msg),$("#send-this-page").parents().find(".ui-dialog-buttonpane button:eq(1)").css("display","none"),e.errCode||setTimeout(function(){$("#send-this-page").dialog("close")},5e3)),setTimeout(function(){Whl.Dialog.close("send")},500)},error:function(e,t){Whl.Dialog.error({title:"Error",msg:t,hideClose:!1,remove:!0})}};$.ajax(a)}})})}),$("#subscribe-news").click(function(e){e.preventDefault(),$("#news-email").val().isEmail()?$("#frm-subscribe").submit():Whl.Dialog.msg({title:Message.dlg.title2,msg:Message.errEmail,remove:!0,callback:function(){$("#news-email").focus()}})}),$("#user-signin").click(function(e){e.preventDefault(),$("#frm-traveller").submit()}),$("#agent-signin").click(function(e){e.preventDefault(),"- email address -"!=$("#agent-name").val()&&"- password -"!=$("#agent-pass").val()&&$("#agent-signin-form").submit()})},sendThisPage:function(){var e=encodeURIComponent(window.location.pathname),t=encodeURIComponent(document.title);this.popUp("/sendpage?uri="+e+"&page_title="+t,600,590)},popUp:function(e,t,a){var i=null;t=t?t:680,a=a?a:420;var r=(screen.width-t)/2;null==i||i.closed?i=window.open(e,"","width="+t+",height="+a+",scrollbars,resizable,center,left="+r):i.location.href=e}}),Whl.UA.Alm=function(e,t,a,i,r,o,n){this._url=e,this._childPolicy=a,this._almData=t,this._startDate=i||null,r=parseInt(r)||1,this._groupMin=Math.max(1,r),o=parseInt(o)||1,this._groupMax=Math.max(1,o),this._tourType=parseInt(n)||0;try{this._departures=Whl.Combo.get("departure-time").getObjValue(),this._currency=$($(".price-currency").get(0)).html(),this._promoCode="",this._disabled=!0,this.initialize()}catch(s){}},Whl.UA.Alm.prototype={initialize:function(){var e={dateFormat:"MM d, yy",minDate:new Date};e.beforeShowDay=this._beforeShowday.bind(this),e.onSelect=this._selectDate.bind(this),e.onChangeMonthYear=this._changeMonth.bind(this),this.calendar=$("#datepicker"),this.calendar.datepicker(e);for(var t=new Date,a="",i="",r=1;12>r;r++){if("undefined"!=typeof alm.allotment[t.getMonth()+r+"-"+t.getFullYear()]){for(var o=alm.allotment[t.getMonth()+r+"-"+t.getFullYear()][0].depart[0].alm,n=0!=this._tourType?this._groupMin:1,s=n,l=0;o>=s;s++,l++)a+='<option value="'+s+'">'+s+"</option>",i+='<option value="'+l+'">'+l+"</option>";i+='<option value="'+l+'">'+l+"</option>",$("#no-adults").html(a),$("#no-children").html(i);break}11==r&&(a+='<option value="1">1</option>',i+='<option value="0">0</option>',$("#departure-time").attr("disabled","disabled"),$("#no-children").attr("disabled","disabled"),$("#no-adults").attr("disabled","disabled"),$("#no-adults").html(a),$("#no-children").html(i))}this._selectedDate=null,this._viewFirstAvail(),$("#submitBooking").unbind("click"),$("#submitBooking").click(this.submitBooking.bindEvent(this));var u=null,d=this._groupMin,c=this._tourType;$("#departure-time").change(function(){$("input[name=departure-time]").val($(this).val()),u=$(this).val(),this.calendar=$("#datepicker");for(var e=this.calendar.datepicker("getDate").getDate(),t=this.calendar.datepicker("getDate").getMonth()+1,a=this.calendar.datepicker("getDate").getFullYear(),i=t+"-"+a,r=alm.allotment[i],o=null,n=null,s=0;s<r.length;s++)if(r[s].date.substr(r[s].date.indexOf(",")-2,2)==e){o=r[s];break}for(var l=0;l<o.depart.length;l++)if($(this).val()==o.depart[l].id){n=o.depart[l].alm;break}for(var h="",p="",m=0!=c?d:1,g=parseInt($("#no-adults").val())||m,v=parseInt($("#no-children").val())||0,f=m,b=0,s=m,l=0;n>=s;s++,l++)h+='<option value="'+s+'">'+s+"</option>",p+='<option value="'+l+'">'+l+"</option>",g==s&&(f=s),v==l&&(b=l);p+='<option value="'+l+'">'+l+"</option>",$("#no-adults").html(h),$("#no-children").html(p),$("#no-adults").val(f),$("#no-children").val(b)}),$("#tester-so").removeClass("ui-hide").dialog({bgiframe:!0,autoOpen:!1,width:500,height:"auto",maxHeight:350,modal:!0,resizable:!1,open:function(){$("#tester-so").parents(".ui-dialog-buttonpane button:eq(1)").focus(),$("#promo-code").val(this._promoCode)}.bind(this),close:function(){$("#promo-code").val("")},buttons:{Cancel:function(){$(this).dialog("close")},Ok:this._checkPromoCode.bind(this)}}),$("#pcode-add").click(function(e){e.preventDefault(),$("#pcode-msg").html(""),$("#tester-so").dialog("open")}),$("#pcode-remove").click(this._removePromoCode.bindEvent(this))},setData:function(e){this._almData=e},submitBooking:function(){if(arguments[0].preventDefault(),this._validate()){Whl.Dialog.msg({id:"book",title:Message.dlg.title3,msg:Message.alm.check,buttons:{}});var param="departure_date="+this._selectedDate.getDate()+"/"+(this._selectedDate.getMonth()+1)+"/"+this._selectedDate.getFullYear();""!=this._promoCode&&(param+="&promo_code="+this._promoCode);var option={type:"POST",url:this._url+"?act=checkAlm",dataType:"text",data:param,success:function(almData){if(Whl.isJson(almData))if(almData=eval("("+almData+")"),Whl.Dialog.close("book"),almData.result){var frm=document.getElementById("frmBooking");frm.departure_date.value=this._selectedDate.getDate()+"/"+(this._selectedDate.getMonth()+1)+"/"+this._selectedDate.getFullYear(),frm.submit()}else{var err=Message[almData.promoCode[0]];(603==almData.promoCode[0]||605==almData.promoCode[0])&&(err=err.replace(/\{0\}/g,almData.promoCode[1][0]),err=err.replace(/\{1\}/g,almData.promoCode[1][1])),Whl.Dialog.error({title:Message.dlg.title4,msg:err,remove:!0})}}.bind(this),error:function(e,t){Whl.Dialog.error({msg:t})}};$.ajax(option)}},_beforeShowday:function(e){var t=e.getMonth()+1+"-"+e.getFullYear(),a=null,i=null,r=!1;if(!Object.isUndefined(this._almData[t])){a=this._almData[t];for(var o in a){var i=a[o],n=new Date(i.date);if(e.getTime()==n.getTime()){r=!0;break}}}return r?[!0,"alm_"+e.getDate()+"-"+t+"_"+o]:[!1,"ui-state-disabled1"]},_selectDate:function(e){var t=new Date(e),a=null;if($("td[class*='alm_"+t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()+"']").each(function(){var e=this.className.split(" ");if(0<e.length){for(var t=0;t<e.length;t++)if(-1!=e[t].indexOf("alm")){a=e[t];break}}else a=this.className}),null!=a){a=a.split("_"),t=a[1].split("-"),this._viewPrice(this._almData[t[1]+"-"+t[2]][parseInt(a[2])]);for(var i=this._almData[t[1]+"-"+t[2]][parseInt(a[2])],r=$("#departure-time").val(),o=0,n=0;n<i.depart.length;n++)if(i.depart[n].id==r){o=i.depart[n].alm;break}$("#departure-time").removeAttr("disabled"),$("#no-adults").removeAttr("disabled");for(var s="",l="",u=0!=this._tourType?this._groupMin:1,d=parseInt($("#no-adults").val())||u,c=parseInt($("#no-children").val())||0,h=u,p=0,n=u,m=0;o>=n;n++,m++)s+='<option value="'+n+'">'+n+"</option>",l+='<option value="'+m+'">'+m+"</option>",d==n&&(h=n),c==m&&(p=m);l+='<option value="'+m+'">'+m+"</option>",$("#no-adults").html(s),$("#no-children").html(l),$("#no-adults").val(h),$("#no-children").val(p)}},_changeMonth:function(e,t){Object.isUndefined(this._almData[t+"-"+e])&&this._update("01/"+t+"/"+e)},_viewPrice:function(e){var t=Whl.Combo.get("departure-time"),a=$("#departure-time").val(),i=!1;t.removeAll();for(var r in this._departures)for(var o in e.depart)if(e.depart[o].id==this._departures[r].value){t.addItem(this._departures[r]),a==this._departures[r].value&&(i=!0);break}i&&$("#departure-time").val(a),$("input.depart").val($("select.depart").val());var n=$("#no-adults"),s=$("#no-children"),l=parseInt(n.val());n.unbind().change(this._viewPrice.bind(this,e)),s.unbind().change(this._viewPrice.bind(this,e));var u=parseFloat(e.adultPrice.replace(/[^0-9\.]/g,""))*parseInt(n.val()),d=parseFloat(e.childPrice.replace(/[^0-9\.]/g,""))*parseInt(s.val());$("#price-adults").html(parseFloat(u.toFixed(2))),1==this._childPolicy?($("#price-children").html(parseFloat(d.toFixed(2))),0==s.val()?$("span.price-children").hide():$("span.price-children").show(),l+=parseInt(s.val())):0==this._childPolicy?($("span.price-children").html("Not Allowed"),$("#no-children").attr("disabled","disabled")):2==this._childPolicy&&$("span.price-children").html("Free of charge"),l>=4?$(".makeitsocial-btn-div").addClass("importantShow"):$(".makeitsocial-btn-div").removeClass("importantShow"),this._selectedDate=new Date(e.date)},_viewFirstAvail:function(){var e=null;for(var t in this._almData){e=this._almData[t];break}if(null===e)this._disable();else{var a=e[0];if(this._disabled&&this._enable(),this._startDate)for(var i in e){var r=e[i];if(r.date==this._startDate){a=r;break}}if(e=a,!this._selectedDate){var o=e.date;this.calendar.datepicker("setDate",new Date(o)),o=o.split(","),o=o[0].split(" "),$("#first-avail-date").html(o[1]+" "+o[0]),this._selectedDate=new Date(e.date)}this._viewPrice(e)}},_disable:function(){$("#first-avail").html(Message.alm.unAvail),$("#first-avail-date").html(""),Whl.Combo.get("departure-time").removeAll().disabled=!0,$("#no-adults").attr("disabled","disabled"),$("#no-children").attr("disabled","disabled"),$(".price-currency").html(""),$("#price-adults").html(""),$("#price-children").html(""),this._disabled=!0,this._selectedDate=null},_enable:function(){$("#first-avail").html(Message.alm.firstAvail),$("#first-avail-date").html(""),$("#departure-time").removeAttr("disabled"),$("#no-adults").removeAttr("disabled"),this._childPolicy>0&&$("#no-children").removeAttr("disabled"),$(".price-currency").html(this._currency),this._disabled=!1},_validate:function(){var e=!1,t=0;if(null!==this._selectedDate){var a=this._selectedDate.getMonth()+1;if(a+="-"+this._selectedDate.getFullYear(),!Object.isUndefined(this._almData[a]))for(var i in this._almData[a]){var r=new Date(this._almData[a][i].date);if(r.getTime()==this._selectedDate.getTime()){e=!0,t=this._almData[a][i];break}}}if(!e)return Whl.Dialog.msg({id:"validate",title:Message.dlg.title2,msg:Message.alm.departureDate}),!1;if(!$("#departure-time").val())return Whl.Dialog.msg({id:"validate",title:Message.dlg.title2,msg:Message.alm.departureTime}),!1;for(var o in t.depart){{t.depart[o]}if(t.depart[o].id==$("#departure-time").val()){t=t.depart[o].alm;break}}if(t=parseInt(t),0==t)return Whl.Dialog.msg({id:"validate",title:Message.dlg.title2,msg:Message[209],remove:!0}),!1;if(t>-1){var n=parseInt($("#no-adults").val())||0,s=parseInt($("#no-children").val())||0,l=n+s;if(l<this._groupMin){var u=Message.alm.groupMin+this._groupMin;return Whl.Dialog.msg({id:"validate",title:Message.dlg.title4,msg:u}),!1}if(l>t)return Whl.Dialog.msg({id:"validate",title:Message.dlg.title6,msg:Message.alm.dateAlt}),!1}return!0},_checkPromoCode:function(){var e=$("#promo-code");if(""==e.val())$("#pcode-msg").html(Message.alm.inValidCode),e.focus();else{$("#pcode-msg").html("");var t=null!=this._selectedDate?this._selectedDate:new Date;t="01/"+(t.getMonth()+1)+"/"+t.getFullYear(),this.setData({}),this._promoCode=e.val(),this._update(t)}},_removePromoCode:function(){arguments[0].preventDefault(),$("#pcode-text").html("").hide(),$("#pcode-remove").hide(),$("#pcode-add").show(),this._promoCode="",$("#promo-code").val(""),$("#promo_code").val("");var e=null!=this._selectedDate?this._selectedDate:new Date;e="01/"+(e.getMonth()+1)+"/"+e.getFullYear(),this.setData({}),this._update(e)},_update:function(date,departDate){var param="date="+date;departDate=departDate||null,""!=this._promoCode&&(param+="&promo_code="+this._promoCode),null!=departDate&&(param+="&departure_date="+departDate.getDate()+"/"+(departDate.getMonth()+1)+"/"+departDate.getFullYear());var option={type:"POST",url:this._url,dataType:"text",data:param,success:function(almData){if(Whl.isJson(almData)){if(almData=eval("("+almData+")"),almData.result){Object.extend(this._almData,almData.allotment);try{DP_jQuery.datepicker._adjustDate("#datepicker")}catch(e){jQuery("#datepicker").datepicker("refresh")}if(""!=this._promoCode)if(almData.promoCode[0]){$("#tester-so").dialog("isOpen")||$("#tester-so").dialog("open");var err=Message[almData.promoCode[0]];(603==almData.promoCode[0]||605==almData.promoCode[0])&&(err=err.replace(/\{0\}/g,almData.promoCode[1][0]),err=err.replace(/\{1\}/g,almData.promoCode[1][1])),$("#pcode-msg").html(err),$("#promo-code").val(this._promoCode).focus(),this._promoCode=""}else $("#tester-so").dialog("close"),$("#promo_code").val(this._promoCode),$("#pcode-text").html(this._promoCode).removeClass("ui-hide").show(),$("#pcode-remove").removeClass("ui-hide").show(),$("#pcode-add").hide();this._hasData()?this._viewFirstAvail():this._disable()}}else Whl.Dialog.error({msg:almData})}.bind(this),error:function(e,t){Whl.Dialog.error({msg:t})}};$.ajax(option)},_hasData:function(){var e=!1;for(var t in this._almData){e=!0;break}return e}},Whl.UA.ImageRotator=function(e,t,a){this._path=e,this._imgData=t,this._elmImg=$("#"+a),this.initialize()},Whl.UA.ImageRotator.prototype={initialize:function(){if(0!=this._elmImg.length&&1!=this._imgData.length){var e=this._preloadImages();e.length>0&&setInterval(this.run.bind(this,e),5e3)}},run:function(e){var t=Whl.rand(this._imgData.length-1);this._elmImg.attr("src",e[t].src)},_preloadImages:function(){var e=[],t=this;return $.each(this._imgData,function(a){e[a]=new Image,Object.isString(this)?e[a].src=this:Object.isObject(this)&&(e[a].src=t._path+this.src||"",e[a].alt=this.alttext||"")}),e}},Whl.UA.AlmPopup=function(e,t,a){this._url=e,this._childPolicy=a,this._almData=t;try{this._departures=Whl.Combo.get("departure-time-popup").getObjValue(),this._currency=$($(".price-currency-popup").get(0)).html(),this._promoCode="",this._disabled=!0,this.initialize()}catch(i){}},Whl.UA.AlmPopup.prototype={initialize:function(){var e={dateFormat:"MM d, yy",minDate:new Date};e.beforeShowDay=this._beforeShowday.bind(this),e.onSelect=this._selectDate.bind(this),e.onChangeMonthYear=this._changeMonth.bind(this),this.calendar=$("#datepicker-popup"),this.calendar.datepicker(e),this._selectedDate=null,this._viewFirstAvail(),$("#submitBooking-popup").unbind("click"),$("#submitBooking-popup").click(this.submitBooking.bindEvent(this)),$("#departure-time-popup").change(function(){$("input[name=departure-time-popup]").val($(this).val())})},submitBooking:function(){if(arguments[0].preventDefault(),this._validate()){Whl.Dialog.msg({id:"book",title:Message.dlg.title3,msg:Message.alm.check,buttons:{}});var param="departure_date="+this._selectedDate.getDate()+"/"+(this._selectedDate.getMonth()+1)+"/"+this._selectedDate.getFullYear();""!=this._promoCode&&(param+="&promo_code="+this._promoCode);var option={type:"POST",url:this._url+"?act=checkAlm",dataType:"text",data:param,success:function(almData){if(Whl.isJson(almData))if(almData=eval("("+almData+")"),Whl.Dialog.close("book"),almData.result){var frm=document.frmBookingPopup;frm.departure_date_popup.value=this._selectedDate.getDate()+"/"+(this._selectedDate.getMonth()+1)+"/"+this._selectedDate.getFullYear(),frm.submit()}else{var err=Message[almData.promoCode[0]];(603==almData.promoCode[0]||605==almData.promoCode[0])&&(err=err.replace(/\{0\}/g,almData.promoCode[1][0]),err=err.replace(/\{1\}/g,almData.promoCode[1][1])),Whl.Dialog.error({title:Message.dlg.title4,msg:err,remove:!0})}}.bind(this),error:function(e,t){Whl.Dialog.error({msg:t,remove:!0})}};$.ajax(option)}},_beforeShowday:function(e){var t=e.getMonth()+1+"-"+e.getFullYear(),a=null,i=null,r=!1;if(!Object.isUndefined(this._almData[t])){a=this._almData[t];for(var o in a){var i=a[o],n=new Date(i.date);if(e.getTime()==n.getTime()){r=!0;break}}}return r?[!0,"alm_"+e.getDate()+"-"+t+"_"+o]:[!1,"ui-state-disabled1"]},_selectDate:function(e){var t=new Date(e),a=null;$("td[class*='alm_"+t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()+"']").each(function(){var e=this.className.split(" ");if(0<e.length){for(var t=0;t<e.length;t++)if(-1!=e[t].indexOf("alm")){a=e[t];break}}else a=this.className}),null!=a&&(a=a.split("_"),t=a[1].split("-"),this._viewPrice(this._almData[t[1]+"-"+t[2]][parseInt(a[2])]))},_changeMonth:function(e,t){Object.isUndefined(this._almData[t+"-"+e])&&this._update("01/"+t+"/"+e)},_viewPrice:function(e){var t=Whl.Combo.get("departure-time-popup");t.removeAll();for(var a in this._departures)for(var i in e.depart)if(e.depart[i].id==this._departures[a].value){t.addItem(this._departures[a]);break}1==t.options.length?($("select.departpopup").hide(),$("span.departpopup").show().html(t.options[0].text)):($("select.departpopup").show(),$("span.departpopup").hide()),$("input.departpopup").val($("select.departpopup").val());var r=$("#no-adults-popup"),o=$("#no-children-popup"),n=parseInt(r.val());r.unbind().change(this._viewPrice.bind(this,e)),o.unbind().change(this._viewPrice.bind(this,e));var s=parseFloat(e.adultPrice.replace(/[^0-9\.]/g,""))*parseInt(r.val()),l=parseFloat(e.childPrice.replace(/[^0-9\.]/g,""))*parseInt(o.val());$("#price-adults-popup").html(s.toFixed(2)),1==this._childPolicy?(0==o.val()?$("span.price-children-popup").hide():($("#price-children-popup").html(l.toFixed(2)),$("span.price-children-popup").show()),n+=parseInt(o.val())):0==this._childPolicy?($("span.price-children-popup").html("Not Allowed"),$("#no-children-popup").attr("disabled","disabled")):2==this._childPolicy&&$("span.price-children-popup").html("Free of charge"),n>=4?$(".makeitsocial-btn-div").addClass("importantShow"):$(".makeitsocial-btn-div").removeClass("importantShow"),this._selectedDate=new Date(e.date)},_viewFirstAvail:function(){var e=null;for(var t in this._almData){e=this._almData[t];break}if(null===e)this._disable();else{if(this._disabled&&this._enable(),e=e[0],!this._selectedDate){var a=e.date;this.calendar.datepicker("setDate",new Date(a)),a=a.split(","),a=a[0].split(" "),$("#first-avail-date-popup").html(a[1]+" "+a[0]),this._selectedDate=new Date(e.date)}this._viewPrice(e)}},_disable:function(){$("#first-avail-popup").html(Message.alm.unAvail),$("#first-avail-date-popup").html(""),Whl.Combo.get("departure-time-popup").removeAll().disabled=!0,$("#no-adults-popup").attr("disabled","disabled"),$("#no-children-popup").attr("disabled","disabled"),$(".price-currency-popup").html(""),$("#price-adults-popup").html(""),$("#price-children-popup").html(""),this._disabled=!0,this._selectedDate=null},_enable:function(){$("#first-avail-popup").html(Message.alm.firstAvail),$("#first-avail-date-popup").html(""),$("#departure-time-popup").removeAttr("disabled"),$("#no-adults-popup").removeAttr("disabled"),this._childPolicy>0&&$("#no-children-popup").removeAttr("disabled"),$(".price-currency-popup").html(this._currency),this._disabled=!1},_validate:function(){var e=!1,t=0;if(null!==this._selectedDate){var a=this._selectedDate.getMonth()+1;if(a+="-"+this._selectedDate.getFullYear(),!Object.isUndefined(this._almData[a]))for(var i in this._almData[a]){var r=new Date(this._almData[a][i].date);if(r.getTime()==this._selectedDate.getTime()){e=!0,t=this._almData[a][i];break}}}if(!e)return Whl.Dialog.msg({id:"validate",title:Message.dlg.title2,msg:Message.alm.departureDate,remove:!0}),!1;if(!$("#departure-time-popup").val())return Whl.Dialog.msg({id:"validate",title:Message.dlg.title2,msg:Message.alm.departureTime,remove:!0}),!1;for(var o in t.depart){{t.depart[o]}if(t.depart[o].id==$("#departure-time-popup").val()){t=t.depart[o].alm;break}}if(t=parseInt(t),0==t)return Whl.Dialog.msg({id:"validate",title:Message.dlg.title2,msg:Message[209],remove:!0}),!1;
    if(t>-1){var n=parseInt($("#no-adults-popup").val()),s=parseInt($("#no-children-popup").val());if(n+s>t)return Whl.Dialog.msg({id:"validate",title:Message.dlg.title6,msg:Message.alm.dateAlt,remove:!0}),!1}return!0},_update:function(date,departDate){var param="date="+date;departDate=departDate||null,""!=this._promoCode&&(param+="&promo_code="+this._promoCode),null!=departDate&&(param+="&departure_date="+departDate.getDate()+"/"+(departDate.getMonth()+1)+"/"+departDate.getFullYear());var option={type:"POST",url:this._url,dataType:"text",data:param,success:function(almData){if(Whl.isJson(almData)){if(almData=eval("("+almData+")"),almData.result){if(Object.extend(this._almData,almData.allotment),DP_jQuery.datepicker._adjustDate("#datepicker-popup"),""!=this._promoCode)if(almData.promoCode[0]){var err=Message[almData.promoCode[0]];(603==almData.promoCode[0]||605==almData.promoCode[0])&&(err=err.replace(/\{0\}/g,almData.promoCode[1][0]),err=err.replace(/\{1\}/g,almData.promoCode[1][1])),$("#promo-code_popup").val(this._promoCode).focus(),this._promoCode=""}else $("#promo_code_popup").val(this._promoCode);this._hasData()?this._viewFirstAvail():this._disable()}}else Whl.Dialog.error({msg:almData,remove:!0})}.bind(this),error:function(e,t){Whl.Dialog.error({msg:t,remove:!0})}};$.ajax(option)},_hasData:function(){var e=!1;for(var t in this._almData){e=!0;break}return e}};